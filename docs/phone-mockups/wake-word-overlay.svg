<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="750" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <radialGradient id="creatureGradient" cx="50%" cy="30%" r="70%">
      <stop offset="30%" style="stop-color:#FBBF24"/>
      <stop offset="100%" style="stop-color:#D97706"/>
    </radialGradient>
    <marker id="arrowHead" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M 0 0 L 8 3 L 0 6 Z" fill="#666"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" fill="#888" font-family="Arial" font-size="16" letter-spacing="2">PHONE APP â€” WAKE WORD OVERLAY FLOW</text>

  <!-- ======= SCREEN 1: Background Listening ======= -->
  <g transform="translate(30, 60)">
    <text x="150" y="-10" text-anchor="middle" fill="#888" font-family="Arial" font-size="12">1. BACKGROUND LISTENING</text>

    <!-- Phone frame -->
    <rect x="30" y="10" width="240" height="440" rx="20" ry="20" fill="#1a1a2e" stroke="#333" stroke-width="2"/>

    <!-- Status bar -->
    <rect x="30" y="10" width="240" height="22" rx="20" ry="20" fill="#252542"/>
    <rect x="30" y="22" width="240" height="10" fill="#252542"/>
    <text x="150" y="26" text-anchor="middle" fill="#888" font-family="Arial" font-size="9">9:41</text>

    <!-- Header bar -->
    <rect x="30" y="32" width="240" height="35" fill="#252542"/>
    <circle cx="50" cy="50" r="4" fill="#4CAF50"/>
    <text x="60" y="53" fill="white" font-family="Arial" font-size="10">Connected</text>
    <circle cx="245" cy="50" r="10" fill="none" stroke="#666" stroke-width="1"/>
    <text x="245" y="54" text-anchor="middle" fill="#888" font-family="Arial" font-size="10">&#x2699;</text>

    <!-- Creature area -->
    <rect x="30" y="67" width="240" height="155" fill="#1a1a2e"/>
    <!-- Creature (idle/sleeping) -->
    <ellipse cx="150" cy="148" rx="50" ry="55" fill="url(#creatureGradient)"/>
    <circle cx="120" cy="118" r="12" fill="url(#creatureGradient)"/>
    <circle cx="180" cy="118" r="12" fill="url(#creatureGradient)"/>
    <ellipse cx="130" cy="140" rx="11" ry="12" fill="white"/>
    <ellipse cx="170" cy="140" rx="11" ry="12" fill="white"/>
    <circle cx="130" cy="142" r="6" fill="black"/>
    <circle cx="170" cy="142" r="6" fill="black"/>
    <path d="M 130 175 Q 150 190 170 175" stroke="black" stroke-width="3" fill="none" stroke-linecap="round"/>

    <!-- Chat area -->
    <rect x="30" y="222" width="240" height="160" fill="#1a1a2e"/>
    <rect x="115" y="235" width="140" height="28" rx="12" fill="#0099FF"/>
    <text x="130" y="254" fill="white" font-family="Arial" font-size="10">check disk space</text>
    <rect x="45" y="270" width="160" height="28" rx="12" fill="#F59E0B"/>
    <text x="55" y="289" fill="#1a1a2e" font-family="Arial" font-size="10">45GB free on /dev/sda1</text>

    <!-- Input bar -->
    <rect x="30" y="382" width="240" height="68" fill="#252542"/>
    <rect x="30" y="430" width="240" height="20" rx="0" ry="20" fill="#252542"/>
    <circle cx="60" cy="410" r="16" fill="#0099FF"/>
    <text x="60" y="415" text-anchor="middle" fill="white" font-family="Arial" font-size="13">&#x1F3A4;</text>
    <rect x="85" y="396" width="140" height="28" rx="14" fill="#ffffff22"/>
    <text x="100" y="414" fill="#888" font-family="Arial" font-size="10">Type a message...</text>
    <circle cx="248" cy="410" r="16" fill="#F59E0B"/>
    <text x="248" y="415" text-anchor="middle" fill="white" font-family="Arial" font-size="12">&#x27A4;</text>

    <!-- Notification indicator -->
    <rect x="45" y="340" width="200" height="30" rx="6" fill="#252542" stroke="#444" stroke-width="1"/>
    <circle cx="60" cy="355" r="4" fill="#4CAF50"/>
    <text x="70" y="359" fill="#aaa" font-family="Arial" font-size="9">Wake word: Listening for "hey toadie"</text>
  </g>

  <!-- Arrow 1->2 -->
  <line x1="305" y1="310" x2="370" y2="310" stroke="#666" stroke-width="2" marker-end="url(#arrowHead)" stroke-dasharray="4,3"/>
  <text x="337" y="298" text-anchor="middle" fill="#4CAF50" font-family="Arial" font-size="10">"hey</text>
  <text x="337" y="310" text-anchor="middle" fill="#4CAF50" font-family="Arial" font-size="10">toadie"</text>

  <!-- ======= SCREEN 2: Wake Word Detected / Recording ======= -->
  <g transform="translate(375, 60)">
    <text x="150" y="-10" text-anchor="middle" fill="#888" font-family="Arial" font-size="12">2. RECORDING (overlay)</text>

    <!-- Phone frame -->
    <rect x="30" y="10" width="240" height="440" rx="20" ry="20" fill="#1a1a2e" stroke="#0099FF" stroke-width="2"/>

    <!-- Dark overlay background (fullscreen) -->
    <rect x="30" y="10" width="240" height="440" rx="20" ry="20" fill="#0d0d1a"/>

    <!-- Creature area (LISTENING state - ears perked, eyes wide) -->
    <ellipse cx="150" cy="165" rx="60" ry="68" fill="url(#creatureGradient)"/>
    <!-- Perked ears -->
    <ellipse cx="108" cy="112" rx="13" ry="16" fill="url(#creatureGradient)" transform="rotate(-15 108 112)"/>
    <ellipse cx="192" cy="112" rx="13" ry="16" fill="url(#creatureGradient)" transform="rotate(15 192 112)"/>
    <!-- Wide eyes (looking up - listening) -->
    <ellipse cx="128" cy="152" rx="13" ry="15" fill="white"/>
    <ellipse cx="172" cy="152" rx="13" ry="15" fill="white"/>
    <circle cx="128" cy="148" r="7" fill="black"/>
    <circle cx="172" cy="148" r="7" fill="black"/>
    <circle cx="130" cy="145" r="3" fill="white"/>
    <circle cx="174" cy="145" r="3" fill="white"/>
    <!-- Small smile -->
    <path d="M 130 198 Q 150 210 170 198" stroke="black" stroke-width="3" fill="none" stroke-linecap="round"/>

    <!-- Audio wave visualization -->
    <g transform="translate(50, 310)">
      <!-- Wave shape -->
      <path d="M 0 30 Q 20 10, 40 30 Q 60 50, 80 30 Q 100 10, 120 30 Q 140 50, 160 30 Q 180 10, 200 30"
            stroke="#0099FF" stroke-width="3" fill="none" stroke-linecap="round" opacity="0.9"/>
      <path d="M 0 30 Q 20 15, 40 30 Q 60 45, 80 30 Q 100 15, 120 30 Q 140 45, 160 30 Q 180 15, 200 30"
            stroke="#0099FF" stroke-width="2" fill="none" stroke-linecap="round" opacity="0.4"/>
    </g>

    <!-- Status text -->
    <text x="150" y="390" text-anchor="middle" fill="white" font-family="Arial" font-size="18">Listening...</text>

    <!-- Recording indicator dot -->
    <circle cx="150" cy="260" r="5" fill="#ff4444" opacity="0.9"/>
  </g>

  <!-- Arrow 2->3 -->
  <line x1="650" y1="310" x2="715" y2="310" stroke="#666" stroke-width="2" marker-end="url(#arrowHead)" stroke-dasharray="4,3"/>
  <text x="682" y="298" text-anchor="middle" fill="#FF9800" font-family="Arial" font-size="10">silence</text>
  <text x="682" y="310" text-anchor="middle" fill="#FF9800" font-family="Arial" font-size="10">detected</text>

  <!-- ======= SCREEN 3: Sending ======= -->
  <g transform="translate(720, 60)">
    <text x="150" y="-10" text-anchor="middle" fill="#888" font-family="Arial" font-size="12">3. SENDING (overlay)</text>

    <!-- Phone frame -->
    <rect x="30" y="10" width="240" height="440" rx="20" ry="20" fill="#1a1a2e" stroke="#FF9800" stroke-width="2"/>

    <!-- Dark overlay background -->
    <rect x="30" y="10" width="240" height="440" rx="20" ry="20" fill="#0d0d1a"/>

    <!-- Creature area (THINKING state - closed eyes) -->
    <ellipse cx="150" cy="165" rx="60" ry="68" fill="url(#creatureGradient)"/>
    <!-- Normal ears -->
    <circle cx="112" cy="112" r="13" fill="url(#creatureGradient)"/>
    <circle cx="188" cy="112" r="13" fill="url(#creatureGradient)"/>
    <!-- Closed eyes -->
    <path d="M 115 152 Q 128 160 141 152" stroke="black" stroke-width="3" fill="none" stroke-linecap="round"/>
    <path d="M 159 152 Q 172 160 185 152" stroke="black" stroke-width="3" fill="none" stroke-linecap="round"/>
    <!-- Small smile -->
    <path d="M 130 198 Q 150 208 170 198" stroke="black" stroke-width="3" fill="none" stroke-linecap="round"/>
    <!-- Thought bubbles -->
    <circle cx="215" cy="125" r="6" fill="white" opacity="0.5"/>
    <circle cx="228" cy="108" r="9" fill="white" opacity="0.5"/>
    <circle cx="244" cy="88" r="13" fill="white" opacity="0.5"/>

    <!-- Spinner -->
    <circle cx="150" cy="310" r="14" fill="none" stroke="#333" stroke-width="3"/>
    <path d="M 150 296 A 14 14 0 0 1 164 310" fill="none" stroke="#FF9800" stroke-width="3" stroke-linecap="round"/>

    <!-- Status text -->
    <text x="150" y="360" text-anchor="middle" fill="white" font-family="Arial" font-size="18">Sending...</text>

    <!-- Subtext -->
    <text x="150" y="385" text-anchor="middle" fill="#666" font-family="Arial" font-size="11">POST /transcribe</text>
  </g>

  <!-- Arrow 3->done -->
  <path d="M 985 400 Q 1010 400, 1010 500 Q 1010 540, 500 540 Q 150 540, 150 480"
        fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,3"/>
  <polygon points="150,485 145,495 155,495" fill="#666"/>
  <text x="530" y="560" text-anchor="middle" fill="#666" font-family="Arial" font-size="10">overlay closes, returns to main app, Porcupine restarts</text>

  <!-- State flow diagram -->
  <g transform="translate(30, 620)">
    <rect x="0" y="0" width="1140" height="90" rx="8" fill="#252542"/>

    <text x="570" y="22" text-anchor="middle" fill="#888" font-family="Arial" font-size="11" letter-spacing="1">WAKE WORD STATE MACHINE</text>

    <!-- IDLE -->
    <rect x="30" y="40" width="120" height="32" rx="16" fill="#4CAF50" opacity="0.2" stroke="#4CAF50" stroke-width="1"/>
    <text x="90" y="61" text-anchor="middle" fill="#4CAF50" font-family="Arial" font-size="11" font-weight="bold">IDLE</text>
    <text x="90" y="82" text-anchor="middle" fill="#555" font-family="Arial" font-size="8">Porcupine listening</text>

    <line x1="155" y1="56" x2="225" y2="56" stroke="#666" stroke-width="1.5" marker-end="url(#arrowHead)"/>
    <text x="190" y="50" text-anchor="middle" fill="#888" font-family="Arial" font-size="8">"hey toadie"</text>

    <!-- RECORDING -->
    <rect x="230" y="40" width="120" height="32" rx="16" fill="#0099FF" opacity="0.2" stroke="#0099FF" stroke-width="1"/>
    <text x="290" y="61" text-anchor="middle" fill="#0099FF" font-family="Arial" font-size="11" font-weight="bold">RECORDING</text>
    <text x="290" y="82" text-anchor="middle" fill="#555" font-family="Arial" font-size="8">MediaRecorder active</text>

    <line x1="355" y1="56" x2="425" y2="56" stroke="#666" stroke-width="1.5" marker-end="url(#arrowHead)"/>
    <text x="390" y="50" text-anchor="middle" fill="#888" font-family="Arial" font-size="8">1.5s silence</text>

    <!-- SENDING -->
    <rect x="430" y="40" width="120" height="32" rx="16" fill="#FF9800" opacity="0.2" stroke="#FF9800" stroke-width="1"/>
    <text x="490" y="61" text-anchor="middle" fill="#FF9800" font-family="Arial" font-size="11" font-weight="bold">SENDING</text>
    <text x="490" y="82" text-anchor="middle" fill="#555" font-family="Arial" font-size="8">HTTP POST audio</text>

    <line x1="555" y1="56" x2="625" y2="56" stroke="#666" stroke-width="1.5" marker-end="url(#arrowHead)"/>
    <text x="590" y="50" text-anchor="middle" fill="#888" font-family="Arial" font-size="8">response</text>

    <!-- DONE -->
    <rect x="630" y="40" width="120" height="32" rx="16" fill="#9C27B0" opacity="0.2" stroke="#9C27B0" stroke-width="1"/>
    <text x="690" y="61" text-anchor="middle" fill="#9C27B0" font-family="Arial" font-size="11" font-weight="bold">DONE</text>
    <text x="690" y="82" text-anchor="middle" fill="#555" font-family="Arial" font-size="8">overlay closes</text>

    <line x1="755" y1="56" x2="825" y2="56" stroke="#666" stroke-width="1.5" marker-end="url(#arrowHead)"/>
    <text x="790" y="50" text-anchor="middle" fill="#888" font-family="Arial" font-size="8">500ms delay</text>

    <!-- Back to IDLE -->
    <rect x="830" y="40" width="120" height="32" rx="16" fill="#4CAF50" opacity="0.2" stroke="#4CAF50" stroke-width="1"/>
    <text x="890" y="61" text-anchor="middle" fill="#4CAF50" font-family="Arial" font-size="11" font-weight="bold">IDLE</text>
    <text x="890" y="82" text-anchor="middle" fill="#555" font-family="Arial" font-size="8">Porcupine restarts</text>

    <!-- Config notes -->
    <text x="1020" y="52" fill="#555" font-family="Arial" font-size="9">silence: 1.5s</text>
    <text x="1020" y="64" fill="#555" font-family="Arial" font-size="9">max rec: 30s</text>
    <text x="1020" y="76" fill="#555" font-family="Arial" font-size="9">sensitivity: 0.7</text>
  </g>
</svg>
